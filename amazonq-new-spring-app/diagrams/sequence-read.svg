<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .actor-box { fill: #e6f3ff; stroke: #0066cc; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 12px; }
      .title { font-weight: bold; font-size: 16px; }
      .method { font-size: 11px; }
      .lifeline { stroke: #666; stroke-width: 2; stroke-dasharray: 5,5; }
      .message { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .return { stroke: #666; stroke-width: 1; stroke-dasharray: 3,3; marker-end: url(#arrowhead); }
      .activation { fill: #ffffcc; stroke: #333; stroke-width: 1; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" class="text title" text-anchor="middle">READ Operation Sequence Diagram</text>

  <!-- Actors -->
  <rect x="50" y="60" width="80" height="40" class="actor-box"/>
  <text x="90" y="85" class="text" text-anchor="middle">Client</text>

  <rect x="180" y="60" width="100" height="40" class="actor-box"/>
  <text x="230" y="85" class="text" text-anchor="middle">Controller</text>

  <rect x="330" y="60" width="100" height="40" class="actor-box"/>
  <text x="380" y="85" class="text" text-anchor="middle">Service</text>

  <rect x="480" y="60" width="100" height="40" class="actor-box"/>
  <text x="530" y="85" class="text" text-anchor="middle">Repository</text>

  <rect x="630" y="60" width="100" height="40" class="actor-box"/>
  <text x="680" y="85" class="text" text-anchor="middle">Database</text>

  <!-- Lifelines -->
  <line x1="90" y1="100" x2="90" y2="320" class="lifeline"/>
  <line x1="230" y1="100" x2="230" y2="320" class="lifeline"/>
  <line x1="380" y1="100" x2="380" y2="320" class="lifeline"/>
  <line x1="530" y1="100" x2="530" y2="320" class="lifeline"/>
  <line x1="680" y1="100" x2="680" y2="320" class="lifeline"/>

  <!-- Messages -->
  <!-- 1. Client to Controller -->
  <line x1="90" y1="130" x2="230" y2="130" class="message"/>
  <text x="160" y="125" class="text method">GET /api/people</text>

  <!-- Activation boxes -->
  <rect x="225" y="130" width="10" height="150" class="activation"/>

  <!-- 2. Controller to Service -->
  <line x1="235" y1="150" x2="380" y2="150" class="message"/>
  <text x="307" y="145" class="text method">findAll()</text>

  <rect x="375" y="150" width="10" height="100" class="activation"/>

  <!-- 3. Service to Repository -->
  <line x1="385" y1="170" x2="530" y2="170" class="message"/>
  <text x="457" y="165" class="text method">findAll()</text>

  <rect x="525" y="170" width="10" height="60" class="activation"/>

  <!-- 4. Repository to Database -->
  <line x1="535" y1="190" x2="680" y2="190" class="message"/>
  <text x="607" y="185" class="text method">SELECT * FROM people</text>

  <rect x="675" y="190" width="10" height="20" class="activation"/>

  <!-- 5. Database return -->
  <line x1="675" y1="210" x2="535" y2="210" class="return"/>
  <text x="605" y="205" class="text method">ResultSet</text>

  <!-- 6. Repository return -->
  <line x1="525" y1="230" x2="385" y2="230" class="return"/>
  <text x="455" y="225" class="text method">List&lt;Person&gt;</text>

  <!-- 7. Service return -->
  <line x1="375" y1="250" x2="235" y2="250" class="return"/>
  <text x="305" y="245" class="text method">List&lt;Person&gt;</text>

  <!-- 8. Controller return -->
  <line x1="225" y1="270" x2="90" y2="270" class="return"/>
  <text x="157" y="265" class="text method">HTTP 200 + JSON Array</text>

  <!-- Transaction boundaries -->
  <rect x="370" y="140" width="170" height="120" fill="none" stroke="#00aa00" stroke-width="2" stroke-dasharray="10,5"/>
  <text x="375" y="135" class="text" fill="#00aa00">@Transactional(readOnly=true)</text>

  <!-- Notes -->
  <rect x="50" y="300" width="680" height="40" fill="#f0f0f0" stroke="#999"/>
  <text x="60" y="320" class="text">Notes: Read operations use read-only transactions for better performance</text>

</svg>
